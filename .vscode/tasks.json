{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "create bin directory",
            "type": "shell",
            "command": "mkdir",
            "args": [
                "-p",
                "bin"
            ],
            "detail": "Create bin directory if it doesn't exist"
        },
        {
            "label": "build",
            "type": "shell",
            "command": "gcc",
            "args": [
                "-g",
                "-o",
                "bin/SolidKnight",
                "src/main.c",
                "src/actor.c",
                "src/level.c",
                "src/solid.c",
                "src/types.c",
                "src/player.c",
                "src/animator.c",
                "src/enemy.c",
                "src/manager.c",
                "$(pkg-config",
                "--cflags",
                "--libs",
                "allegro-5",
                "allegro_primitives-5",
                "allegro_image-5",
                "allegro_font-5",
                "allegro_ttf-5)",
                "-lm",
                "-Wall",
                "-Wextra",
                "-std=c11"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "problemMatcher": [
                "$gcc"
            ],
            "dependsOn": [
                "create bin directory"
            ],
            "detail": "Build SolidKnight"
        },
        {
            "label": "build and run",
            "type": "shell",
            "command": "./bin/SolidKnight",
            "dependsOn": [
                "build"
            ],
            "problemMatcher": [],
            "detail": "Build and run the game"
        },
        {
            "label": "clean",
            "type": "shell",
            "command": "rm",
            "args": [
                "-rf",
                "bin"
            ],
            "detail": "Clean build artifacts"
        },
        {
            "label": "package",
            "type": "shell",
            "command": "bash",
            "args": [
                "-c",
                "mkdir -p dist/SolidKnight && cp bin/SolidKnight dist/SolidKnight/ && cp -r data dist/SolidKnight/ && cd dist && tar -czf SolidKnight.tar.gz SolidKnight && echo 'Package created: dist/SolidKnight.tar.gz'"
            ],
            "dependsOn": [
                "build"
            ],
            "problemMatcher": [],
            "detail": "Package the game for distribution on linux"
        },
    ]
}